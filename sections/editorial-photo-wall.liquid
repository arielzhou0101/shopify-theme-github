{% comment %}
  Editorial Photo Wall â€“ free-image version of Dawn's collection editorial grid
{% endcomment %}

<section id="section-{{ section.id }}"
  class="editorial-photo-wall section section--page-width spacing-style"
  style="
    --gap-xl: {{ section.settings.gap }}px;
    --pad-y: {{ section.settings.padding }}px;
  ">

  <div class="page-width">
    <div class="editorial-photo__grid">
      <div class="editorial-photo__spacer"></div>

      {%- for block in section.blocks -%}
        {%- liquid
          assign i           = forloop.index0
          assign grid_set    = i | divided_by: 8
          assign idx         = i | modulo: 8
          case idx
  when 0
    assign col = '2 / span 4'
    assign row = 1
    assign span = 5
  when 1
    assign col = '7 / span 5'
    assign row = 3
    assign span = 5
  when 2
    assign col = '1 / span 8'
    assign row = 9
    assign span = 6
  when 3
    assign col = '3 / span 8'
    assign row = 16
    assign span = 6
  when 4
    assign col = '7 / span 5'
    assign row = 23
    assign span = 5
  when 5
    assign col = '2 / span 4'
    assign row = 25
    assign span = 5
  when 6
    assign col = '5 / span 8'
    assign row = 31
    assign span = 6
  when 7
    assign col = '2 / span 8'
    assign row = 38
    assign span = 6
endcase

          assign row = row | plus: grid_set | times: 44
        -%}

        <figure class="editorial-photo__item-{{ idx }}"
                style="grid-column: {{ col }}; grid-row: {{ row }} / span {{ span }};"
                {{ block.shopify_attributes }}>
          {%- if block.settings.link != blank -%}<a href="{{ block.settings.link }}">{%- endif -%}

          {%- if block.settings.image != blank -%}
            {{ block.settings.image
              | image_url: width: 1000
              | image_tag:
                  widths: '400,600,800,1000',
                  sizes: '(min-width: 768px) 50vw, 100vw',
                  loading: 'lazy',
                  alt: block.settings.alt | escape }}
          {%- else -%}
            {{ 'image' | placeholder_svg_tag: 'placeholder' }}
          {%- endif -%}

          {%- if block.settings.link != blank -%}</a>{%- endif -%}
        </figure>
      {%- endfor -%}
    </div>
  </div>
</section>

{{ 'editorial-photo-wall.css' | asset_url | stylesheet_tag }}

{% schema %}
{
  "name": "Editorial Photo Wall",
  "tag": "section",
  "settings": [
    { "type": "range", "id": "gap",     "label": "Grid gap (px)",          "min": 0, "max": 80,  "step": 4, "default": 24 },
    { "type": "range", "id": "padding", "label": "Vertical padding (px)",  "min": 0, "max": 120, "step": 4, "default": 48 }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text",         "id": "alt",   "label": "Alt text" },
        { "type": "url",          "id": "link",  "label": "Optional link" }
      ]
    }
  ],
  "max_blocks": 24,
  "presets": [
  {
    "name": "Editorial Photo Wall",
    "blocks": [
      { "type": "image", "settings": { "image": "", "alt": "Image 1" } },
      { "type": "image", "settings": { "image": "", "alt": "Image 2" } },
      { "type": "image", "settings": { "image": "", "alt": "Image 3" } },
      { "type": "image", "settings": { "image": "", "alt": "Image 4" } },
      { "type": "image", "settings": { "image": "", "alt": "Image 5" } }
    ]
  }
]

}
{% endschema %}
