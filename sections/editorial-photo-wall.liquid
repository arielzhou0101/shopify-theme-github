{% stylesheet 'editorial-photo-wall.css' %}

<div class="editorial-collection__grid">
  <div class="editorial-collection__spacer"></div>

  {% assign photo_items = '' %}
  {% for i in (1..16) %}
    {% assign img_id = 'photo_' | append: i %}
    {% assign img = section.settings[img_id] %}
    {% if img != blank %}
      {% assign photo_items = photo_items | append: img | append: '|||' %}
    {% endif %}
  {% endfor %}

  {% assign photo_array = photo_items | split: '|||' %}

  {% for img in photo_array %}
    {% liquid
      assign current_grid_index = forloop.index0 | divided_by: 8
      assign current_item_index = forloop.index0 | modulo: 8

      case current_item_index
        when 0
          assign grid_column = '2 / span 4'
          assign grid_row = 1
          assign grid_row_span = 5
        when 1
          assign grid_column = '7 / span 5'
          assign grid_row = 3
          assign grid_row_span = 5
        when 2
          assign grid_column = '1 / span 8'
          assign grid_row = 9
          assign grid_row_span = 6
        when 3
          assign grid_column = '3 / span 8'
          assign grid_row = 16
          assign grid_row_span = 6
        when 4
          assign grid_column = '7 / span 5'
          assign grid_row = 23
          assign grid_row_span = 5
        when 5
          assign grid_column = '2 / span 4'
          assign grid_row = 25
          assign grid_row_span = 5
        when 6
          assign grid_column = '5 / span 8'
          assign grid_row = 31
          assign grid_row_span = 6
        when 7
          assign grid_column = '2 / span 8'
          assign grid_row = 38
          assign grid_row_span = 6
      endcase

      assign full_grid_rows = current_grid_index | times: 44
      assign grid_row = grid_row | plus: full_grid_rows
    %}
    <div
      class="editorial-collection__item-{{ forloop.index0 | modulo: 4 }}"
      style="grid-column: {{ grid_column }}; grid-row: {{ grid_row }} / span {{ grid_row_span }};"
    >
      <img src="{{ img }}" loading="lazy" style="width: 100%; height: 100%; object-fit: cover;" />
    </div>
  {% endfor %}
</div>

{% endschema %}

{% schema %}
{
  "name": "Editorial Photo Wall",
  "settings": [
    {% for i in (1..16) %}
      {
        "type": "image_picker",
        "id": "photo_{{ i }}",
        "label": "Photo {{ i }}"
      }{% if forloop.last == false %},{% endif %}
    {% endfor %}
  ],
  "presets": [
    {
      "name": "Editorial Photo Wall",
      "category": "Image"
    }
  ]
}
{% endschema %}
