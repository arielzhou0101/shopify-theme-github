{% comment %}
  Based on: sections/collection-list.liquid (editorial layout)
  Modified: use image_picker (up to 6), no collection binding
{% endcomment %}

{% liquid
  assign photo_array = '' | split: ','
  for i in (1..6)
    assign key = 'photo_' | append: i
    assign img = section.settings[key]
    if img != blank
      assign photo_array = photo_array | push: img
    endif
  endfor
%}

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="section section--{{ section.settings.section_width }} color-{{ section.settings.color_scheme }} section-collection-list spacing-style gap-style"
  style="
    {% render 'spacing-style', settings: section.settings %}
    {% render 'gap-style', value: section.settings.gap %}
    --collection-list-column-gap-desktop: 8px;
    --collection-list-row-gap-desktop: 8px;
  "
>
  <div class="section-collection-list__content">
    {%- content_for 'blocks' -%}
  </div>

  {% capture list_items %}
    {% for img in photo_array %}
      <div class="collection-list__item">
        <div class="collection-card">
          <div class="collection-card__media">
            <img
              src="{{ img | image_url: width: 960 }}"
              alt=""
              loading="lazy"
              class="motion-reduce"
              width="auto"
              height="auto"
            >
          </div>
          {% if section.settings.show_caption %}
            <div class="collection-card__caption">
              <p class="caption">Image {{ forloop.index }}</p>
            </div>
          {% endif %}
        </div>
      </div>
      {% unless forloop.last %}<!--@list/split-->{% endunless %}
    {% endfor %}
  {% endcapture %}

  {% assign list_items_array = list_items | strip | split: '<!--@list/split-->' %}

  <div
    class="collection-list collection-list--{{ section.id }} force-full-width"
  >
    {% render 'editorial-collection-grid', items: list_items_array %}
  </div>
</div>

{% schema %}
{
  "name": "Editorial Photo Wall",
  "class": "ui-editorial-photo-wall",
  "settings": [
    {% for i in (1..6) %}
      {
        "type": "image_picker",
        "id": "photo_{{ i }}",
        "label": "Photo {{ i }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %},
    {
      "type": "checkbox",
      "id": "show_caption",
      "label": "Show image captions",
      "default": true
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        { "value": "page-width", "label": "Page width" },
        { "value": "full-width", "label": "Full width" }
      ],
      "default": "page-width"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Gap",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 64
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    }
  ],
  "presets": [
    {
      "name": "Editorial Photo Wall",
      "category": "Image",
      "settings": {
        "photo_1": "shopify://shop_images/example1.jpg",
        "photo_2": "shopify://shop_images/example2.jpg",
        "photo_3": "shopify://shop_images/example3.jpg",
        "photo_4": "shopify://shop_images/example4.jpg"
      }
    }
  ]
}
{% endschema %}
